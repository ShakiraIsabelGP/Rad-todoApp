{"version":3,"sources":["com/wsscode/pathom/trace.cljc"],"mappings":"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","names":["cljs.spec.alpha/def-impl","cljs.core/keyword?","cljs.core/string?","cljs.core/nat-int?","cljs.core/map?","cljs.spec.alpha/map-spec-impl","G__75666","cljs.spec.alpha.every_impl","G__75678","cljs.core/vector?","cljs.core/any?","com.wsscode.pathom.trace/now","cljs.core/inst-ms","js/Date","cljs.spec.alpha/fspec-impl","cljs.spec.alpha.spec_impl","cljs.spec.alpha/cat-impl","cljs.spec.alpha/nilable-impl","map__75687","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","retspec75684","cljs.core.get","argspec75683","com.fulcrologic.guardrails.core/run-check","f75686","temp__5733__auto__","ret75685","com.wsscode.pathom.trace/trace","env","event","event-trace","cljs.core.swap_BANG_","cljs.core/conj","cljs.core.assoc","var_args","G__75690","com.wsscode.pathom.trace/trace-enter","js/Error","id","cljs.core.gensym","trace-id","G__75692","com.wsscode.pathom.trace/trace-leave","com.wsscode.pathom.trace/live-trace!","trace-atom","cljs.core/add-watch","_","n","evt","cljs.core/peek","cljs.core.print","cljs.core.pr_str","cljs.core.dissoc","com.wsscode.pathom.trace/compute-durations","trace","leave-items","cljs.core.into","cljs.core.comp","cljs.core.filter","p1__75700#","cljs.core._EQ_","cljs.core.map","cljs.core.juxt","cljs.core/identity","initial-time","cljs.core/first","cljs.core.remove","e","p__75703","map__75705","timestamp","map__75708","et","leave","cljs.core.merge","js/com","js/com.wsscode","js/com.wsscode.pathom","js/com.wsscode.pathom.trace","js/com.wsscode.pathom.trace.trace-tree-collect","method-table__4619__auto__","cljs.core.atom","prefer-table__4620__auto__","method-cache__4621__auto__","cached-hierarchy__4622__auto__","hierarchy__4623__auto__","fexpr__75718","cljs.core/MultiFn","cljs.core.symbol","com.wsscode.pathom.trace/trace-tree-collect","_x","row","x","com.wsscode.pathom.trace/tree-assoc-detail","keys","cljs.core.update_in","cljs.core.fnil","cljs.core/select-keys","com.wsscode.pathom.trace/trace-style","style","p__75719","map__75720","com.wsscode.pathom.trace/tree-assoc-key-detail","key","com.wsscode.pathom.trace/trace->tree*","paths","path","cljs.core.reduce","p__75726","map__75727","relative-timestamp","G__75729","cljs.core/Keyword","p1__75722#","cljs.core.update","next-path","cljs.core.conj","cljs.core/contains?","cljs.core/assoc-in","count","i","cljs.core.range","cljs.core/keys","cljs.core/assoc","cljs.core.get_in","com.wsscode.pathom.trace/trace->tree","cljs.core/group-by","com.wsscode.pathom.trace/compute-details-duration","res","p1__75739#","cljs.core/vec","cljs.core.sort_by","last-detail","last-ts","p1__75740#","x__4214__auto__","y__4215__auto__","or__4126__auto__","com.wsscode.pathom.trace/normalize-tree-details","trace-tree","clojure.walk/postwalk","G__75743","p__75746","map__75747","com.wsscode.pathom.trace/compute-d3-tree","duration","children","details","G__75749","cljs.core.mapv","p__75750","map__75751","p__75754","vec__75755","cljs.core.nth","k","v","cljs.core.keyword","cljs.core/name","cljs.core/second","com.wsscode.pathom.trace/trace->viz","com.wsscode.pathom.trace/wrap-parser-trace","parser","tx","cljs.core/some","trace*","env'","parser-trace","com.wsscode.pathom.trace.trace_enter","res__75232__auto__","com.wsscode.async.async-cljs/chan?","c__50892__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__50893__auto__","switch__50856__auto__","state_75788","state_val_75789","statearr-75797","statearr-75799","cljs.core/cons","cljs.core.async.impl.ioc-helpers/take!","inst_75786","cljs.core.async.impl.ioc-helpers/return-chan","inst_75764","statearr-75801","statearr-75802","cljs.core/rest","ex75800","statearr-75803","statearr-75804","inst_75771","inst_75772","com.wsscode.async.async-cljs/throw-err","inst_75773","inst_75774","inst_75775","cljs.core/PersistentHashMap","inst_75776","inst_75777","inst_75778","inst_75779","inst_75780","inst_75781","cljs.core/deref","inst_75782","inst_75783","statearr-75805","statearr-75806","statearr-75807","statearr-75808","state-machine__50857__auto__","ret-value__50858__auto__","result__50859__auto__","cljs.core/keyword-identical?","ex__50860__auto__","e75809","statearr-75810","cljs.core/seq","statearr-75811","state__50894__auto__","statearr-75812","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","com.wsscode.pathom.trace.trace_leave","com.wsscode.pathom.trace/trace-plugin","_env"],"sourcesContent":["(ns com.wsscode.pathom.trace\n  (:require\n    [clojure.spec.alpha :as s]\n    [clojure.walk :as walk]\n    [com.fulcrologic.guardrails.core :refer [>def >defn >fdef => | <- ?]]\n    [#?(:clj  com.wsscode.async.async-clj\n        :cljs com.wsscode.async.async-cljs)\n     :refer [let-chan]])\n  #?(:cljs\n     (:require-macros\n       [com.wsscode.pathom.trace])))\n\n(>def ::event keyword?)\n(>def ::label string?)\n(>def ::direction #{::enter ::leave})\n(>def ::timestamp nat-int?)\n(>def ::relative-timestamp nat-int?)\n(>def ::duration nat-int?)\n(>def ::style \"Map with CSS styles to apply in the trace bar.\" map?)\n(>def ::event-entry (s/keys :opt [::event ::label ::style]))\n(>def ::details (s/coll-of ::event-entry :kind vector?))\n(>def ::trace* \"Atom with ::details.\" any?)\n\n(defn now []\n  #?(:clj  (System/currentTimeMillis)\n     :cljs (inst-ms (js/Date.))))\n\n(>defn trace [env event]\n  [map? ::event-entry\n   => (? ::details)]\n  (if-let [event-trace (get env ::trace*)]\n    (swap! event-trace conj\n      (assoc event\n        :com.wsscode.pathom.core/path (:com.wsscode.pathom.core/path env [])\n        ::timestamp (now)))))\n\n(defn trace-enter\n  ([env event]\n   (let [id (gensym \"pathom-trace-\")]\n     (trace env (assoc event ::direction ::enter ::id id))\n     id))\n  ([env event trace-id]\n   (trace env (assoc event ::direction ::enter ::id trace-id))\n   trace-id))\n\n(defn trace-leave\n  ([env trace-id]\n   (trace env {::direction ::leave ::id trace-id}))\n  ([env trace-id event]\n   (trace env (assoc event ::direction ::leave ::id trace-id))\n   trace-id))\n\n#?(:clj\n   (defmacro tracing [env event & body]\n     `(if (get ~env ::trace*)\n        (let [trace-id# (trace-enter ~env ~event)\n              res#      (do ~@body)]\n          (trace-leave ~env trace-id# ~event)\n          res#)\n        (do ~@body))))\n\n(defn live-trace! [trace-atom]\n  (add-watch trace-atom :live\n    (fn [_ _ _ n]\n      (let [evt (peek n)]\n        (print (str (pr-str [(::event evt) (dissoc evt ::event)]) \"\\n\"))))))\n\n(defn compute-durations [trace]\n  (let [leave-items  (into {} (comp (filter (comp #(= ::leave %) ::direction))\n                                    (map (juxt ::id identity)))\n                           trace)\n\n        initial-time (::timestamp (first trace))]\n\n    (into []\n          (comp (remove (fn [e] e (= ::leave (::direction e))))\n                (map (fn [{::keys [id timestamp] :as e}]\n                       (let [e (assoc e ::relative-timestamp (- timestamp initial-time))]\n                         (if-let [{et ::timestamp :as leave} (get leave-items id)]\n                           (-> e\n                               (assoc\n                                 ::timestamp-leave et\n                                 ::duration (- et timestamp))\n                               (merge (dissoc leave ::timestamp))\n                               (dissoc ::id ::direction))\n                           e)))))\n          trace)))\n\n(defmulti trace-tree-collect (fn [_x row] (::event row)))\n\n(defmethod trace-tree-collect :default [x _] x)\n\n(defn tree-assoc-detail [row x keys]\n  (update-in x [:response ::details] (fnil conj [])\n    (select-keys row (into [::event ::label ::relative-timestamp ::duration ::style] keys))))\n\n(defn trace-style [row style]\n  (assoc row ::style style))\n\n(defn tree-assoc-key-detail [{:keys [key] :as row} x keys]\n  (update-in x [:response ::children key ::details] (fnil conj [])\n    (select-keys row (into [::event ::label ::relative-timestamp ::duration ::style] keys))))\n\n(defn trace->tree* [paths path]\n  (-> (reduce\n        (fn [x {::keys [event relative-timestamp]\n                :keys  [key]\n                :as    row}]\n          (case event\n            (:com.wsscode.pathom.core/trace-plugin\n              :com.wsscode.pathom.parser/parse-loop)\n            (update x :response #(merge (select-keys row [::duration\n                                                          ::relative-timestamp\n                                                          :com.wsscode.pathom.core/path]) %))\n\n            :com.wsscode.pathom.parser/process-key\n            (let [next-path (conj path key)]\n              (if (contains? (:visited x) next-path)\n                x\n                (-> x\n                    (assoc-in [:response :com.wsscode.pathom.core/path] path)\n                    (assoc-in [:response ::children key]\n                      (-> (merge (trace->tree* paths next-path) (select-keys row [:key\n                                                                                  ::relative-timestamp]))\n                          (assoc :com.wsscode.pathom.core/path next-path)))\n                    (update :visited conj next-path))))\n\n            :com.wsscode.pathom.core/join-seq\n            (let [count (:com.wsscode.pathom.core/seq-count row)]\n              (reduce\n                (fn [x i]\n                  (let [next-path (conj path i)]\n                    (assoc-in x [:response ::children i]\n                      (-> (merge (trace->tree* paths next-path) (select-keys row [:key\n                                                                                  ::relative-timestamp]) {:key i})\n                          (assoc :com.wsscode.pathom.core/path next-path)))))\n                x\n                (range count)))\n\n            (:com.wsscode.pathom.parser/async-return\n              :com.wsscode.pathom.parser/call-read\n              :com.wsscode.pathom.parser/external-wait-key\n              :com.wsscode.pathom.parser/skip-resolved-key\n              :com.wsscode.pathom.parser/skip-wait-key)\n            (update-in x [:response ::children key ::details] (fnil conj [])\n              (select-keys row [:key\n                                ::event\n                                ::label\n                                ::style\n                                ::relative-timestamp]))\n\n            (:com.wsscode.pathom.parser/trigger-reader-retry\n              :com.wsscode.pathom.parser/trigger-recheck-schedule)\n            (update-in x [:response ::details] (fnil conj [])\n              (select-keys row [:key\n                                ::event\n                                ::label\n                                ::relative-timestamp\n                                ::style\n                                :com.wsscode.pathom.parser/processing]))\n\n            :com.wsscode.pathom.parser/max-iterations-reached\n            (update-in x [:response ::children key ::details] (fnil conj [])\n              (select-keys row [::event\n                                ::label\n                                ::style\n                                ::relative-timestamp\n                                :com.wsscode.pathom.parser/max-key-iterations]))\n\n            (::trace-done\n              :com.wsscode.pathom.parser/flush-watchers-loop\n              :com.wsscode.pathom.parser/process-pending\n              :com.wsscode.pathom.parser/reset-loop)\n            (update-in x [:response ::details] (fnil conj [])\n              (select-keys row [::event\n                                ::label\n                                ::relative-timestamp\n                                ::style\n                                :com.wsscode.pathom.parser/loop-keys\n                                :com.wsscode.pathom.parser/merge-result?\n                                :com.wsscode.pathom.parser/provides]))\n\n            :com.wsscode.pathom.parser/merge-result\n            (reduce\n              (fn [x key]\n                (update-in x [:response ::children key ::details] (fnil conj [])\n                  (select-keys row [::event\n                                    ::label\n                                    ::relative-timestamp\n                                    ::style])))\n              x\n              (keys (:com.wsscode.pathom.parser/response-value row)))\n\n            (:com.wsscode.pathom.connect/batch-items-ready\n              :com.wsscode.pathom.connect/batch-result-error\n              :com.wsscode.pathom.connect/batch-result-ready\n              :com.wsscode.pathom.connect/call-resolver\n              :com.wsscode.pathom.connect/call-resolver-batch\n              :com.wsscode.pathom.connect/call-resolver-with-cache\n              :com.wsscode.pathom.connect/compute-plan\n\n              :com.wsscode.pathom.connect/reader3-enter\n              :com.wsscode.pathom.connect/reader3-entity-shape\n              :com.wsscode.pathom.connect/reader3-prepare-ast\n              :com.wsscode.pathom.connect/reader3-execute\n\n              :com.wsscode.pathom.connect/invalid-resolve-response\n              :com.wsscode.pathom.connect/merge-resolver-response\n              :com.wsscode.pathom.connect/resolver-error\n              :com.wsscode.pathom.connect/schedule-resolver\n              :com.wsscode.pathom.connect/waiting-resolver\n              :com.wsscode.pathom.core/parallel-sequence-loop\n              :com.wsscode.pathom.parser/watch-pending-timeout)\n            (update-in x [:response ::details] (fnil conj [])\n              (select-keys row [:key\n                                ::duration\n                                ::event\n                                ::label\n                                ::relative-timestamp\n                                ::style\n                                :com.wsscode.pathom.connect/input-data\n                                :com.wsscode.pathom.connect/items-count\n                                :com.wsscode.pathom.connect/plan\n                                :com.wsscode.pathom.connect/sym\n                                :com.wsscode.pathom.connect/waiting-key\n                                :com.wsscode.pathom.core/error\n                                :com.wsscode.pathom.parser/external-wait-ignore-timeout\n                                :com.wsscode.pathom.parser/provides]))\n\n            :com.wsscode.pathom.parser/value-return\n            (-> x\n                (update-in [:response ::children key ::details] (fnil conj [])\n                  (select-keys row [::event\n                                    ::label\n                                    ::relative-timestamp\n                                    ::style]))\n                (update-in [:response ::children key] assoc ::duration (- relative-timestamp (get-in x [:response ::children key ::relative-timestamp]))))\n\n            (trace-tree-collect x row)))\n        {:visited  #{}\n         :response {}}\n        (get paths path))\n      :response))\n\n(defn trace->tree [trace]\n  (let [paths (->> trace compute-durations (group-by :com.wsscode.pathom.core/path))]\n    (trace->tree* paths [])))\n\n(defn compute-details-duration [x]\n  (let [res         (update x ::details #(vec (sort-by ::relative-timestamp %)))\n        last-detail (peek (::details res))\n        last-ts     (+ (::duration last-detail 0) (::relative-timestamp last-detail 0))]\n    (update res ::duration #(max (or % 0) (- last-ts (::relative-timestamp res 0))))))\n\n(defn normalize-tree-details [trace-tree]\n  (walk/postwalk\n    (fn [x]\n      (cond-> x\n        (and (map? x) (contains? x ::details))\n        (compute-details-duration)))\n    trace-tree))\n\n(defn compute-d3-tree [{::keys                        [relative-timestamp duration children details]\n                        :com.wsscode.pathom.core/keys [path]\n                        :keys                         [key]}]\n  (cond-> {:start    relative-timestamp\n           :path     path\n           :duration (or duration 0)\n           :details  (mapv (fn [{::keys [relative-timestamp duration event]\n                                 :as    row}]\n                             (let [details (->> (dissoc row ::relative-timestamp ::timestamp ::duration ::event)\n                                                (into {} (map (fn [[k v]] [(keyword (name k)) v]))))]\n                               (merge {:event    (name event)\n                                       :duration (or duration 0)\n                                       :start    relative-timestamp}\n                                      details)))\n                       details)}\n    key (assoc :name (str key))\n    children (assoc :children\n               (into [] (map (comp compute-d3-tree second) children)))))\n\n(defn trace->viz [trace]\n  (-> trace trace->tree normalize-tree-details compute-d3-tree\n      (assoc :hint \"Query\")))\n\n(defn wrap-parser-trace [parser]\n  (fn wrap-parser-trace-internal [env tx]\n    (if (some #{:com.wsscode.pathom/trace} tx)\n      (let [trace*       (or (::trace* env) (atom []))\n            env'         (assoc env ::trace* trace*)\n            parser-trace (trace-enter env' {::event ::trace-plugin})]\n        (let-chan [res (parser env' tx)]\n          (trace-leave env' parser-trace {::event ::trace-plugin})\n          (trace env' {::event ::trace-done})\n          (assoc res :com.wsscode.pathom/trace (trace->viz @trace*))))\n      (parser env tx))))\n\n(def trace-plugin\n  {:com.wsscode.pathom.core/wrap-parser\n   wrap-parser-trace\n\n   :com.wsscode.pathom.connect/register\n   [{:com.wsscode.pathom.connect/sym     `trace\n     :com.wsscode.pathom.connect/output  [:com.wsscode.pathom/trace]\n     :com.wsscode.pathom.connect/resolve (fn [_env _] {:com.wsscode.pathom/trace nil})}]})\n"]}