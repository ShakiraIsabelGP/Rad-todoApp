{"version":3,"sources":["com/app/model/todo.cljc"],"mappings":";AAeA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASC,AACCC,AACAC;AAEV,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASI,AACCC,AACAF;AAEV,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASM,AACCC,AACAC,AACAH,AACAF;AAEV,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASS,AAGCJ,AACAF;AAEV,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASU,AACCL,AACAM,AACAR;AAEV,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAASY,AACCL,AAEa,AAAAM,AAAoCQ;AAApC,AAAA,AAAAP,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAAA,AAA+BM;AAA/B,AAAAF,AAAAJ,AAAA,AAAaK;AAAb,AAAA;AAHvB,AAAA,AAAA;AAuBG,AAAA;;;AAAAG,AAAA,AAAAC,AAAA,AAAA;;AAAA,AAAAC,AAAA,AAAA,AAAA,AAAAC;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAX,AAAA,AAAAW,AAAA,AAAA,AAAA,AAAA,AAAAV,AAAAC,AAAAS,AAAAA;AAAA,AAAAR,AAAAQ,AAAA,AAAkCW;AAAlC,AAAAnB,AAAAQ,AAAA,AAAyCY;AAAzC,AAAA,AAAA,AAAA,AAGsBjB;AAHtB,AAAA;AAAA,AAAA,AAAAM;AAAA,AAAA,AAAAC,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAb,AAAA,AAAAa,AAAA,AAAA,AAAA,AAAA,AAAAZ,AAAAC,AAAAW,AAAAA;AAAA,AAAAV,AAAAU,AAAA,AAC8BW;AAD9B,AAAA,AAAAV,AAAAC;AAAAC,AAAA;AAAA,AAAA,AAAAD,AAAAC;;AAAA,AAAA,AAEqB,AAAA,AAAA,AAAA,AAACS,AAAMD,AAAME,AAAmBJ,AAAiBC;AAFtE,AAAA,AAAAR,AAAAD;;AAAA;AAAA,AAAA,AAAAT;AAAA,AAAA,AAAAY,AAAAF;AAAAG,AAAA;AAAA,AAAA,AAAAH,AAAAG;;AAAA,AAAA,AAAA,AAAAC,AAAA,AAAAC,AAAA,AAAA,AAAAf,AAAA;AAAA,AAAA,AAAAc;AAAA,AAAA,AAAAE,AAAAF;AAAA,AAAA,AAAAE,AAAAA,AAAAhB,AAAAgB,AAAAhB;;AAAA;;AAAA,AAAA,AAAAU,AAAAE;;;AAMH,AAAA,AAAKU,AAAYzC,AAAGG,AAAYK,AAAKH,AAASI,AAAOE","names":["com.fulcrologic.rad.attributes/new-attribute","cljs.core/with-meta","com.app.model.todo/id","com.fulcrologic.rad.attributes-options/identity?","com.fulcrologic.rad.attributes-options/schema","com.app.model.todo/description","com.fulcrologic.rad.attributes-options/identities","com.app.model.todo/priority","com.fulcrologic.rad.attributes-options/target","com.fulcrologic.rad.attributes-options/cardinality","com.app.model.todo/date","com.app.model.todo/status","com.fulcrologic.rad.report-options/column-heading","com.app.model.todo/all-todos","p__63440","map__63441","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","query-params","env","_","com.app.model.todo/update-todo-status","com.fulcrologic.fulcro.mutations/->Mutation","com.fulcrologic.fulcro.mutations/mutate","fulcro-mutation-env-symbol","map__63443","p__63448","map__63449","*after-render*-orig-val__63451","com.fulcrologic.fulcro.raw.components/*after-render*","*after-render*-temp-val__63452","*after-render*-orig-val__63454","*after-render*-temp-val__63455","temp__5735__auto__","com.fulcrologic.fulcro.algorithms.lookup/app-algorithm","default-action","id","status","state","cljs.core.swap_BANG_","cljs.core/assoc-in","com.app.model.todo/attributes"],"sourcesContent":["(ns com.app.model.todo\n  (:require\n    [com.fulcrologic.rad.attributes :refer [defattr]]\n    [com.fulcrologic.rad.attributes-options :as ao]\n    [com.wsscode.pathom.connect :as pc]\n    [com.fulcrologic.rad.type-support.date-time :as datetime]\n    [com.fulcrologic.rad.form :as form]\n    [taoensso.timbre :as log]\n    [com.fulcrologic.rad.report-options :as ro]\n    #?@(:clj\n        [[com.wsscode.pathom.connect :as pc :refer [defmutation]]\n         [com.app.components.database-queries :as queries]]\n        :cljs\n        [[com.fulcrologic.fulcro.mutations :as m :refer [defmutation]]])))\n\n(defattr id :todo/id :uuid\n         {ao/identity? true\n          ao/schema    :production})\n\n(defattr description :todo/description :string\n         {ao/identities #{:todo/id}\n          ao/schema     :production})\n\n(defattr priority :todo/priority :ref\n         {ao/target      :priority/id\n          ao/cardinality :one\n          ao/identities  #{:todo/id}\n          ao/schema      :production})\n\n(defattr date :todo/date :instant\n         {::form/field-style           :date-at-noon\n          ::datetime/default-time-zone \"America/Bogota\"\n          ao/identities                #{:todo/id}\n          ao/schema                    :production})\n\n(defattr status :todo/status :boolean\n         {ao/identities #{:todo/id}\n          ro/column-heading   \"Completed?\"\n          ao/schema     :production})\n\n(defattr all-todos :todo/all-todos :ref\n         {ao/target    :todo/id\n          ::pc/output  [{:todo/all-todos [:todo/id]}]\n          ::pc/resolve (fn [{:keys [query-params] :as env} _]\n                         #?(:clj\n                            {:todo/all-todos (queries/get-all-todos env (log/spy :info query-params))}))})\n\n#?(:clj\n   (pc/defresolver todo-priority-resolver [{:keys [parser] :as env} {:todo/keys [id]}]\n                   {::pc/input  #{:todo/id}\n                    ::pc/output [:todo/id :priority/label]}\n                   (let [result (parser env [{[:todo/id id] [{:todo/priority [:priority/id :priority/label]}]}])]\n                     (get-in (log/spy :info result) [[:todo/id id] :todo/priority]))))\n\n#?(:clj\n   (defmutation update-todo-status [env {id   :id status :status}]\n                {::pc/params #{:todo/id}\n                 ::pc/output [:todo/id]}\n                (form/save-form* env {::form/id        id\n                                      ::form/master-pk :todo/id\n                                      ::form/delta     {[:todo/id id] {:todo/status {:before (not status) :after (boolean status)}}}})))\n\n#?(:cljs\n   (defmutation update-todo-status [{id :id status :status}]\n                (action [{:keys [state]}]\n                        (swap! state assoc-in [:todo/id id :todo/status] status))\n                (remote [_] true)))\n\n\n(def attributes [id description date priority status all-todos])\n\n#?(:clj\n   (def resolvers [todo-priority-resolver update-todo-status]))\n\n\n"]}